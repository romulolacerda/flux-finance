<label class="flex flex-col gap-2 group w-full">
    @if (label) {
    <span class="text-slate-700 text-sm font-bold flex items-center gap-2 mb-1">
        @if (icon) { <span class="material-symbols-outlined text-primary-600">{{icon}}</span> }
        {{ label }}
    </span>
    }

    <div class="relative flex items-center w-full">
        @if (prefix) {
        <span class="absolute left-4 text-slate-400 font-bold z-10 select-none">{{ prefix }}</span>
        }

        <input [type]="inputType" [placeholder]="placeholder" [value]="value" [disabled]="isDisabled"
            (input)="onInput($event)" (focus)="onFocus()" (blur)="onBlur()" [class.pl-12]="prefix" [class.pl-4]="!prefix"
            [class.pr-12]="showPasswordToggle" [class.border-red-500]="error"
            [class.focus:border-red-500]="error" [class.focus:ring-red-200]="error"
            class="w-full h-12 sm:h-14 rounded-xl border border-gray-300 bg-white text-slate-900 font-medium placeholder:text-slate-400 focus:border-primary focus:ring-4 focus:ring-primary/20 outline-none transition-all duration-200 disabled:opacity-50 disabled:bg-slate-50 shadow-sm hover:border-gray-400">

        @if (showPasswordToggle) {
        <button type="button" (click)="togglePassword()"
            class="absolute right-0 top-0 h-12 w-12 sm:h-14 sm:w-14 flex items-center justify-center text-slate-400 hover:text-primary transition-colors">
            <span class="material-symbols-outlined text-xl">{{ isPasswordVisible ? 'visibility_off' : 'visibility'
                }}</span>
        </button>
        }

        @if (value && !error && !showPasswordToggle && type !== 'number' && type !== 'password') {
        <div class="absolute right-4 text-success animate-fade-in pointer-events-none">
            <span class="material-symbols-outlined text-xl">check_circle</span>
        </div>
        }
    </div>

    @if (error) {
    <span class="text-red-500 text-xs font-semibold animate-slide-down flex items-center gap-1 mt-1">
        <span class="material-symbols-outlined text-sm">error</span>
        {{ error }}
    </span>
    }
</label>